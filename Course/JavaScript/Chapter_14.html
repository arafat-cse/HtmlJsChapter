<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 14</title>
    <link rel="icon" type="image/x-icon" href="../../images/isdb-bisew.png">
    <link rel="stylesheet" href="jsStyle.css">
    <style>
        div {
            margin: 10px;
        }
        .data {
            width: 300px;
            background-color: white;
            color: black;
            padding: 5px;
            border-radius: 10px;
        }
        input{
            padding: 10px;
            border-radius: 5px;
        }
        table {
            width: 100%;
        }
        th, td {
            padding: 10px;
            text-align: left;
        }
    </style>
</head>
<body> 
    <!-- Back button Start -->
    <fieldset><marquee>Chapter 14</marquee></fieldset>
    <div>
        <a href="jsindex.html"><img src="../../images/Back.png" alt="Back_Image"></a>
    </div>
    <!-- Back button End -->
    <!-- 14.1 Persisting Information with Cookies -->
    <h3>14.1 Persisting Information with Cookies</h3>
    <h1>Store, Retrieve, and Delete a Cookie</h1>
    <form>
        <div>
            <label for="key">Enter key:</label>
            <input type="text" id="key" placeholder="Enter key:" required />
        </div>
        <div>
            <label for="value">Enter value:</label>
            <input type="text" id="value" placeholder="Enter value:" required />
        </div>
    </form>
    <button id="setCookie">Set Cookie</button>
    <button id="getCookie">Get Cookie</button>
    <button id="eraseCookie">Delete Cookie</button>
    <p>Cookie value:</p>
    <div id="cookieDisplay" class="data"></div>
    <!-- 14.2 Using sessionStorage for Client-Side Storage -->
    <h3>14.2 Using sessionStorage for Client-Side Storage</h3>
    <h2>Session Storage</h2>
    <button class="button" id="setSession">Set Session Data</button>
    <div class="data">
        <table id="sessionTable">
            <thead>
                <tr>
                    <th>Key</th>
                    <th>Value</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
    <!-- Local Storage -->
    <h3>14.3 Using localStorage for Client-Side Storage</h3>
    <h2>Local Storage</h2>
    <button class="button" id="setLocal">Set Local Data</button>
    <div class="data">
        <table id="localTable">
            <thead>
                <tr>
                    <th>Key</th>
                    <th>Value</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
    <script>
        // Cookie Functions 
        function setCookie() {
            const key = document.getElementById('key').value;
            const value = document.getElementById('value').value;
            if (key && value) {
                document.cookie = `${key}=${encodeURIComponent(value)}; path=/`;
                alert("Cookie has been set!");
            } else {
                alert("Please enter both key and value.");
            }
        }
        function getCookie() {
            const key = document.getElementById('key').value;
            const cookieDisplay = document.getElementById('cookieDisplay');
            cookieDisplay.innerHTML = '';
            if (!key) {
                alert("Please enter a key.");
                return;
            }
            const regex = new RegExp(`(?:^|; )${key}=([^;]*)`);
            const match = document.cookie.match(regex);
            const value = match ? decodeURIComponent(match[1]) : 'Cookie not found!';
            cookieDisplay.innerHTML = `<p>${value}</p>`;
        }
        function eraseCookie() {
            const key = document.getElementById('key').value;
            if (key) {
                document.cookie = `${key}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/`;
                alert(`Cookie with key "${key}" has been deleted!`);
                document.getElementById('cookieDisplay').innerHTML = '';
            } else {
                alert("Please enter a key.");
            }
        }
        //  Session Storage Functions 
        function setSessionStorage() {
            const key = document.getElementById('key').value;
            const value = document.getElementById('value').value;
            if (key && value) {
                sessionStorage.setItem(key, value);
                alert("Session storage data has been set!");
                updateSessionTable();
            } else {
                alert("Please enter both key and value.");
            }
        }
        function updateSessionTable() {
            const tbody = document.querySelector('#sessionTable tbody');
            tbody.innerHTML = '';
            for (let i = 0; i < sessionStorage.length; i++) {
                const key = sessionStorage.key(i);
                const value = sessionStorage.getItem(key);

                const row = document.createElement('tr');
                row.innerHTML = `<td>${key}</td><td>${value}</td>
                                <td><button onclick="removeSessionItem('${key}')">Delete</button></td>`;
                tbody.appendChild(row);
            }
        }
        function removeSessionItem(key) {
            sessionStorage.removeItem(key);
            updateSessionTable();
        }
        //  Local Storage Functions
        function setLocalStorage() {
            const key = document.getElementById('key').value;
            const value = document.getElementById('value').value;
            if (key && value) {
                localStorage.setItem(key, value);
                alert("Local storage data has been set!");
                updateLocalTable();
            } else {
                alert("Please enter both key and value.");
            }
        }
        function updateLocalTable() {
            const tbody = document.querySelector('#localTable tbody');
            tbody.innerHTML = '';

            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                const value = localStorage.getItem(key);
                const row = document.createElement('tr');
                row.innerHTML = `<td>${key}</td><td>${value}</td>
                                <td><button onclick="removeLocalItem('${key}')">Delete</button></td>`;
                tbody.appendChild(row);
            }
        }
        function removeLocalItem(key) {
            localStorage.removeItem(key);
            updateLocalTable();
        }
        // Event listeners
        document.getElementById('setCookie').onclick = setCookie;
        document.getElementById('getCookie').onclick = getCookie;
        document.getElementById('eraseCookie').onclick = eraseCookie;

        document.getElementById('setSession').onclick = setSessionStorage;
        document.getElementById('setLocal').onclick = setLocalStorage;
        // Update tables on page load
        updateSessionTable();
        updateLocalTable();
    </script>

</body>
</html>
